Usando Extensões
================

A utilização de uma extensão normalmente envolve os seguintes passos:

  1. Faça o download da extensão no [repositório](http://www.yiiframework.com/extensions/) 
  do Yii.
  2. Descompacte a extensão no diretório `extensions/xyz`, dentro do 
  [diretório base da aplicação](/doc/guide/basics.application#application-base-directory), 
  onde `xyz` é o nome da extensão.
  3. Importe, configure e utilize a extensão.
  
Cada extensão tem um nome que a identifica unicamente. Dada uma extensão chamada 
`xyz`, podemos sempre utilizar o path alias `ext.xyz` para localizar seu diretório 
base, que contém todos os arquivos de `xyz`.

> Note|Nota: O path alias `ext` está disponível a partir da versão 1.0.8. Nas versões 
anteriores, precisávamos utilizar `application.extensions` para nos referir ao diretório 
base das extensões. Nos exemplos a seguir, vamos assumir que `ext` está definido, 
Caso você utilize a versão 1.0.7, ou anterior, substitua o path alias por 
`aaplication.extensions`.

Extensões diferentes tem requisitos diferentes para importação, configuração e 
utilização. Abaixo, resumimos os tipos mais comuns de utilização de extensões, 
de acordo com as categorias descritas na [visão geral](/doc/guide/extensions.overview).

Componente de Aplicação
-----------------------

Para utilizar um [componente de aplicação](/doc/guide/basics.application#application-component), 
primeiro precisamos alterar a [configuração da aplicação](/doc/guide/basics.application#application-configuration) 
adicionando uma nova entrada na propriedade `components`, como no código abaixo:

~~~
[php]
return array(
    // 'preload'=>array('xyz',...),
    'components'=>array(
        'xyz'=>array(
            'class'=>'ext.xyz.XyzClass',
            'property1'=>'value1',
            'property2'=>'value2',
        ),
        // configurações de outros componentes
    ),
);
~~~

Dessa forma, podemos acessar o componente em qualquer lugar utilizando 
`Yii::app()->xyz`. O componente será criado somente quando for acessado pela primeira vez, 
a não ser que ele tenha sido adicionado na propriedade `preload`.

Widget
------

[Widgets](/doc/guide/basics.view#widget) são utilizados principalmente nas 
[visões](/doc/guide/basics.view). Dada uma classe widget, chamada `XyzClass`, 
pertencente a extensão `xyz`, podemos utiliza-la da seguinte maneira:

~~~
[php]
// um widget que não precisa de conteúdo para seu corpo
<?php $this->widget('ext.xyz.XyzClass', array(
    'property1'=>'value1',
    'property2'=>'value2')); ?>

// um widget que precisa de conteúdo para o seu corpo
<?php $this->beginWidget('ext.xyz.XyzClass', array(
    'property1'=>'value1',
    'property2'=>'value2')); ?>

...conteúdo do corpo do widget...

<?php $this->endWidget(); ?>
~~~

Ação
----

[Ações](/doc/guide/basics.controller#action) são utilizadas por um 
[controle](/doc/guide/basics.controller) para responder à uma requisição específica 
do usuário. Dada a classe da ação `XyzClass`, pertencente a extensão `xyz`, 
podemos utiliza-la sobrescrevendo o método [CController::actions] na classe de 
nosso controle:

~~~
[php]
class TestController extends CController
{
	public function actions()
	{
		return array(
			'xyz'=>array(
				'class'=>'ext.xyz.XyzClass',
				'property1'=>'value1',
				'property2'=>'value2',
			),
			// outras ações
		);
	}
}
~~~

Dessa forma, a ação pode ser acessada através da [rota](/doc/guide/basics.controller#route) 
`test/xyz`.

Filtro
------

[Filtros](/doc/guide/basics.controller#filter) também são utilizados por um 
[controle](/doc/guide/basics.controller). Basicamente eles pré e pós processam a requisição 
do usuário manuseada por uma [ação](/doc/guide/basics.controller#action).
Dada a classe do filtro `XyzClass`, pertencente a extensão `xyz`, podemos utiliza-la 
sobrescrevendo o método [CController::filters], na classe de nosso controle.

~~~
[php]
class TestController extends CController
{
	public function filters()
	{
		return array(
			array(
				'ext.xyz.XyzClass',
				'property1'=>'value1',
				'property2'=>'value2',
			),
			// outros filtros
		);
	}
}
~~~

No exemplo acima, podemos utilizar no primeiro elemento do 
vetor os operadores `+` e `-`,  para limitar as ações onde o filtro será aplicado. 
Para mais detalhes, veja a documentação da classe [CController].

Controle
--------

Um [controle](/doc/guide/basics.controller), fornece um conjunto de ações que podem 
ser requisitadas pelos usuários. Para utilizar um extensão de um controle, precisamos 
configurar a propriedade [CWebApplication::controllerMap] na 
[configuração da aplicação](/doc/guide/basics.application#application-configuration):

~~~
[php]
return array(
	'controllerMap'=>array(
		'xyz'=>array(
			'class'=>'ext.xyz.XyzClass',
			'property1'=>'value1',
			'property2'=>'value2',
		),
		// outros controles
	),
);
~~~

Dessa forma, uma ação `a` no controle pode ser acessada pela 
[rota](/doc/guide/basics.controller#route) `xyz/a`.


Validador
---------

Um validador é utilizado principalmente na classe de um [modelo](/doc/guide/basics.model) 
(que estenda de [CFormModel] ou [CActiveRecord]). Dada a classe de um validador 
chamada `XyzClass`, pertencente a extensão `xyz`, podemos utiliza-la sobrescrevendo 
o método [CModel::rules] na classe de nosso modelo:

~~~
[php]
class MyModel extends CActiveRecord // ou CFormModel
{
	public function rules()
	{
		return array(
			array(
				'attr1, attr2',
				'ext.xyz.XyzClass',
				'property1'=>'value1',
				'property2'=>'value2',
			),
			// outras regras de validação
		);
	}
}
~~~

Comando de Console
------------------

Uma extensão do tipo [comando de console](/doc/guide/topics.console), normalmente 
é utilizada para adicionar comandos à ferramenta `yiic`. Dado um comando de console 
`XyzClass`, pertencente à extensão `xyz`, podemos utiliza-lo o adicionando 
nas configurações da aplicação de console:

~~~
[php]
return array(
	'commandMap'=>array(
		'xyz'=>array(
			'class'=>'ext.xyz.XyzClass',
			'property1'=>'value1',
			'property2'=>'value2',
		),
		// outros comandos
	),
);
~~~

Dessa forma, podemos utilizar o comando `xyz` na ferramenta `yiic`.

> Note|Nota: Uma aplicação de console normalmente utiliza um arquivo de configuração 
diferente do utilizado pela aplicação web. Se uma aplicação foi criada utilizando o 
comando `yiic webapp`, o arquivo de configurações para o console estará em `protected/config/console.php`, 
enquanto o arquivo de configuração para a aplicação web estará em `protected/config/main.php`.

Módulo
------

Para utilizar módulos, por favor, veja a seção sobre [módulos](/doc/guide/basics.module#using-module).

Componente Genérico
-------------------

Para utilizar um [componente](/doc/guide/basics.component), primeiro precisamos 
incluir seu arquivo de classe, utilizando:

~~~
Yii::import('ext.xyz.XyzClass');
~~~

Feito isso, podemos criar uma instância dessa classe, configurar suas propriedades e 
chamar seus métodos. Podemos também estendê-lo para criar novas classes.

<div class="revision">$Id: extension.use.txt 1299 2009-08-07 00:25:55Z qiang.xue $</div>
