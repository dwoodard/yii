Динамическое содержимое
===============

Когда мы используем [кэширование фрагментов](/doc/guide/caching.fragment) или
[кэширование страниц](/doc/guide/caching.page), то часто попадаем в ситуацию,
когда целые части содержимого на выходе относительно статичны, кроме одного
или нескольких мест. Например, страница помощи может отображать статичную
вспомогательную наряду с именем залогиненного пользователя, отображаемого
вверху.

Для решения этой проблемы мы можем изменять содержимое кэша в зависимости от
имени пользователя, но это было бы очень большой тратой драгоценного места
(на диске) для кэширования практически одинакового содержимого, кроме имени
пользователя. Мы также можем разделить страницу на несколько фрагментов и 
кэшировать их по отдельности, но это усложняет наше представление и делает код
слишком сложным. Лучший подход - использование возможности
*динамического содержимого*, обеспечиваемого классом [CController].

Динамическое содержимое означает фрагмент содержимого на выходе, который не
должен кэшироваться, даже если он окружен кэшированным фрагментом. Для создания
содержимого динамическим все время, надо его генерировать каждый раз, даже
когда окружающий контент взят из кэша. Для решения задачи, нам требуется,
чтобы динамическое содержимое генерировалось некой функцией или методом.

Мы вызываем метод [CController::renderDynamic()] для вставки динамического
содержимого в желаемое место.

~~~
[php]
...другое HTML содержимое...
<?php if($this->beginCache($id)) { ?>
...фрагмент кэшируемого содержимого...
	<?php $this->renderDynamic($callback); ?>
...фрагмент кэшируемого содержимого...
<?php $this->endCache(); } ?>
...другое HTML содержимое...
~~~

В коде выше, `$callback` - это существующая функция обратного вызова PHP. Это
может быть строка с именем метода текущего контроллера или глобальной функции.
Также, это может быть массив, передаваемый в метод класса (прим перев. - не
уверен в правильности понятого). Любые дополнительные параметры в методе
[renderDynamic()|CController::renderDynamic()] будут переданы в функцию
обратного вызова. Функция обратного вызова должна возвратить динамическое
содержимое, а не отображать его.

<div class="revision">$Id: caching.dynamic.txt 163 2008-11-05 12:51:48Z weizhuo $</div>