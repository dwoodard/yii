Component
=========

Yii-applikationer är uppbyggda av komponenter, objekt framtagna efter en 
specifikation. En komponent är en instans av [CComponent] eller en nedärvd 
klass. Användning av en komponent involverar huvudsakligen att sätta/läsa dess 
propertyn samt signalera/hantera dess event. Basklassen [CComponent] 
specificerar hur hur man definierar property och event.

Component Property
------------------

En komponents property är snarlik en publik medlemsvariabel i ett objekt. Vi kan 
läsa dess värde eller tilldela den ett värde. 
Till exempel,

~~~
[php]
$width=$component->textWidth;     // get the textWidth property
$component->enableCaching=true;   // set the enableCaching property
~~~

För att definiera en property kan vi helt enkelt definiera en publik 
medlemsvariabel i komponentklassen. Ett mer flexibelt sätt är att definiera 
getter- och setter-metoder i komponentklassen, på följande sätt:

~~~
[php]
public function getTextWidth()
{
    return $this->_textWidth;
}

public function setTextWidth($value)
{
    $this->_textWidth=$value;
}
~~~

Ovanstående kodexempel definierar en skrivbar property `textWidth` (namnet är 
inte skiftlägeskänsligt). Vid läsning av propertyn kommer `getTextWidth()` att 
anropas och dess returvärde bildar propertyns värde. Likaledes, vid skrivning 
till propertyn kommer `setTextWidth()` att köras. Propertyn kan bara läsas om en 
settermetod inte definierats, försök att skriva leder till en exception. 
Användande av getter- och settermetoder för att definiera en property ger den 
extra fördelen att ytterligare logik  (t.ex. genomföra validering, signalera 
event) kan exekveras i samband med läsning/skrivning av propertyn.

> Märk: Det finns en liten skillnad mellan en property definierad genom getter-
/settermetoder resp. som en medlemsvariabel i klassen. I det förra fallet är namnet 
skiftlägesokänsligt (case-insensitive), i det senare skiftlägeskänsligt.

Component Event
---------------

Komponenthändelser är speciella property som tar metoder (s.k. `event handlers`) 
som värde. Anslutning (tilldelning) av en metod till en event-property leder 
till att metoden automatiskt kommer att genomlöpas på de ställen där händelsen 
signaleras. Av denna anledning kan beteendet hos en komponent anpassas på sätt 
som inte var möjliga att förutse vid utvecklingen av komponenten.

En komponents händelse definieras genom att en metod definieras vars namn börja 
med `on`. Precis som propertyn definierade med getter-/settermetoder är 
händelsers namn okänsliga för skiftläge (case-insensitive). Följande kodexempel 
definierar en `onClicked`-händelse:

~~~
[php]
public function onClicked($event)
{
	$this->raiseEvent('onClicked', $event);
}
~~~

där `$event` är en instans av [CEvent] eller en nedärvd klass, representerande 
parametern event.

Vi kan ansluta en metod till denna händelse som nedan:

~~~
[php]
$component->onClicked=$callback;
~~~

där `$callback` refererar till en giltig PHP callback i form av en global 
funktion eller en klassmetod. I det senare fallet måste denna callback ges i 
form av en array: `array($object,'methodName')`.

Signaturen för en händelsehanterare (event handler) måste se ut så här:

~~~
[php]
function methodName($event)
{
    ......
}
~~~

där `$event` är parametern som beskriver händelsen (med ursprung i 
`raiseEvent()`-anropet). `$event`-parametern är en instans av [CEvent] eller 
nedärvd klass. Som ett minimum innehåller den information om vem som signalerat 
händelsen.

Om vi nu anropar `onClicked()` kommer `onClicked`-händelsen att signaleras (inuti
`onClicked()`), vilket leder till att den anslutna händelsehanteraren anropas automatiskt.

En händelse kan bli ansluten till flera händelsehanterare. Då händelsen 
signaleras kommer hanterarna att anropas i den ordning de anslutits till 
händelsen. En hanterare kan förhindra att de följande hanterarna körs genom att 
sätta [$event->handled|CEvent::handled] till true.

<div class="revision">$Id: basics.component.txt 416 2008-12-28 05:28:11Z qiang.xue $</div>